(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))c(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const l of t.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&c(l)}).observe(document,{childList:!0,subtree:!0});function s(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function c(e){if(e.ep)return;e.ep=!0;const t=s(e);fetch(e.href,t)}})();const q=()=>{let n=document.querySelector(".space-ship"),i=document.querySelector(".container"),s=document.querySelector(".start-button"),c=document.querySelector(".offer"),e=0;n.style.top=window.innerHeight+"px",n.classList.add("space-ship--hidden"),s.addEventListener("click",()=>{c.style.opacity=0,n.classList.remove("space-ship--hidden"),n.style.top=window.innerHeight-n.offsetHeight-100+"px",document.addEventListener("transitionend",()=>{n.style.transition="none",document.addEventListener("keydown",t=>{let l=t.key;l!=="ArrowLeft"&&l!=="ArrowRight"||(l==="ArrowLeft"&&e>0&&(e-=100),l==="ArrowRight"&&e<i.offsetWidth-n.offsetWidth&&(e+=100),n.style.left=e+"px")})})})},x=()=>{let n=document.querySelector(".stars"),i=document.querySelector("#catch-sound"),s=document.querySelector("#pop-sound"),c=document.querySelector(".counter"),e=document.querySelector(".counter__number"),t=document.querySelector(".finish-screen__counter"),l=document.querySelector(".space-ship"),w=document.querySelector(".start-button"),v=document.querySelector(".restart-button"),m=document.querySelector(".finish-screen"),p=document.querySelector(".finish-screen__title"),d=0,h,a=[],y=["star--pink","star--yellow","star--blue"];function g(o,u){return Math.floor(Math.random()*(u-o+1))+o}function S(o,u){const r=o.getBoundingClientRect(),f=u.getBoundingClientRect();return!(r.bottom<f.top+100||r.top>f.bottom||r.right<f.left||r.left>f.right)}function L(){const o=document.createElement("div");o.classList.add("star"),o.classList.add(y[Math.floor(Math.random()*y.length)]),o.innerHTML='<svg viewBox="0 0 770 788" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="770.000000" height="788.000000" fill="none" customFrame="#000000"><path id="Звезда 1" d="M471.446 272.236L751.157 272.247L524.872 440.51L611.297 712.753L385 544.508L158.703 712.753L245.128 440.51L18.8433 272.247L298.554 272.236L385 0L471.446 272.236Z" fill="rgb(196,196,196)" fill-rule="evenodd" /></svg>',o.style.left=Math.random()*(window.innerWidth-200)+"px",o.style.width=g(50,90)+"px",o.style.animationDuration=g(5,7)+"s",n.appendChild(o),a.push(o)}w.addEventListener("click",()=>{v.addEventListener("click",()=>{m.classList.remove("finish-screen--open"),c.classList.remove("counter--hidden"),l.classList.remove("space-ship--hidden"),h=setInterval(()=>{L()},2e3)}),h=setInterval(()=>{L()},2e3);function o(){clearInterval(h),l.classList.add("space-ship--hidden"),c.classList.add("counter--hidden"),d=0,e.innerText=d;for(let r=a.length-1;r>=0;r--)a[r].remove(),a.splice(r,1)}function u(){for(let r=a.length-1;r>=0;r--){let f=a[r].getBoundingClientRect();if(S(a[r],l)&&(d+=1,e.innerText=d,i.currentTime=0,i.play(),a[r].remove(),a.splice(r,1)),f.top>window.innerHeight){s.currentTime=0,s.play(),t.innerText=`Счет: ${d}`,d<=5?p.innerText="Я так понимаю, это был разогрев?":p.innerText="Так держать, космический странник!!!",m.classList.add("finish-screen--open"),o();break}}requestAnimationFrame(u)}u()})},M=()=>{function n(e,t){return Math.floor(Math.random()*(t-e+1))+e}function i(e){for(var e;e;e--)s()}function s(){let e=document.createElement("div");e.className="fon-star",e.style.top=100*Math.random()+"%",e.style.left=100*Math.random()+"%",document.querySelector(".fon").appendChild(e)}function c(){document.querySelectorAll(".fon-star").forEach(t=>{t.style.animationDelay=n(2,5)+"s"})}i(200),c()},b=()=>{let n=[],i=document.querySelector("body");function s(e,t){return Math.floor(Math.random()*(t-e+1))+e}setInterval(()=>{const e=document.createElement("div");e.innerHTML='<img src="./images/small-ship.png", alt="">',e.classList.add("ship"),e.style.bottom=Math.random()*window.innerHeight+"px",e.style.width=s(50,90)+"px",e.style.animationDuration=s(7,10)+"s",i.appendChild(e),n.push(e)},s(1e4,2e4));function c(){for(let e=n.length-1;e>=0;e--)n[e].getBoundingClientRect().left>window.innerWidth&&(n[e].remove(),n.splice(e,1));requestAnimationFrame(c)}c()};document.addEventListener("DOMContentLoaded",function(){A()});const A=()=>{q(),x(),M(),b()};
